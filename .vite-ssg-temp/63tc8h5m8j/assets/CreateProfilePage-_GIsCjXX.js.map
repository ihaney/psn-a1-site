{"version":3,"file":"CreateProfilePage-_GIsCjXX.js","sources":["../../../src/pages/CreateProfilePage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\nimport { analytics } from '../lib/analytics';\nimport { logError } from '../lib/errorLogging';\nimport toast from 'react-hot-toast';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\nexport default function CreateProfilePage() {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: '',\n    email: '',\n    city: '',\n    country: ''\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) {\n        toast.error('No user found. Please sign in again.');\n        setLoading(false);\n        return;\n      }\n\n      const { error: profileError } = await supabase\n        .from('user_profiles')\n        .insert({\n          auth_id: user.id,\n          email: formData.email,\n          username: formData.username,\n          city: formData.city,\n          country: formData.country\n        });\n\n      if (profileError) {\n        await logError(profileError, {\n          type: 'profile_creation_error',\n          context: {\n            userId: user.id,\n            formData\n          }\n        });\n        throw profileError;\n      }\n\n      analytics.trackEvent('profile_created');\n      toast.success('Profile created successfully!');\n      navigate('/');\n    } catch (error) {\n      console.error('Error creating profile:', error);\n      toast.error(error instanceof Error ? error.message : 'Failed to create profile. Please try again.');\n      \n      await logError(error instanceof Error ? error : new Error('Profile creation failed'), {\n        type: 'profile_creation_error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <h2 className=\"text-2xl font-bold text-gray-100 mb-6\">Create Your Profile</h2>\n      \n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        <div>\n          <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Username *\n          </label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            value={formData.username}\n            onChange={(e) => setFormData(prev => ({ ...prev, username: e.target.value }))}\n            className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#F4A024]\"\n            required\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Email *\n          </label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={formData.email}\n            onChange={(e) => setFormData(prev => ({ ...prev, email: e.target.value }))}\n            className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#F4A024]\"\n            required\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"city\" className=\"block text-sm font-medium text-gray-300 mb-2\">\n            City *\n          </label>\n          <input\n            type=\"text\"\n            id=\"city\"\n            value={formData.city}\n            onChange={(e) => setFormData(prev => ({ ...prev, city: e.target.value }))}\n            className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#F4A024]\"\n            required\n          />\n        </div>\n\n        <div>\n          <label htmlFor=\"country\" className=\"block text-sm font-medium text-gray-300 mb-2\">\n            Country *\n          </label>\n          <input\n            type=\"text\"\n            id=\"country\"\n            value={formData.country}\n            onChange={(e) => setFormData(prev => ({ ...prev, country: e.target.value }))}\n            className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#F4A024]\"\n            required\n          />\n        </div>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"w-full btn-primary py-2 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {loading ? <LoadingSpinner /> : 'Create Profile'}\n        </button>\n      </form>\n    </div>\n  );\n}"],"names":["toast"],"mappings":"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"}